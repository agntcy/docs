"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[23964],{13523:(e,t,r)=>{r.d(t,{$r:()=>i,M1:()=>a,li:()=>o,pS:()=>u,wE:()=>c});var n=r(56038);let o="X-Fetch-Nonce",s=new Set;function i(e){s.add(e)}function a(){return s.values().next().value||""}function c(e){let t={};return void 0!==e&&(t["X-Fetch-Nonce-To-Validate"]=e),void 0===e?t[o]=a():s.has(e)?t[o]=e:t[o]=Array.from(s).join(","),t}function u(){let e=n.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";e&&i(e)}},23964:(e,t,r)=>{r.r(t);var n=r(50467),o=r(31635);r(90787);var s=r(78134),i=r(39595),a=r(97797),c=r(90891),u=r(51987);let l=class CreateBranchElement extends HTMLElement{set error(e){this.errorContainer.innerHTML=e||""}set result(e){this.resultContainer.innerHTML=e||""}set submitting(e){this.spinner.style.display=e?"inline":"none"}set baseRepoNwo(e){this.baseRepoName&&(this.baseRepoName.textContent=e,this.selectedNwo=e,this.renderSelectItems())}get repoDefaultBranch(){return this.sourceBranch?.getAttribute("data-default-branch")||null}renderSelectItems(){this.repos.map(e=>{let t=e.closest(".js-repo-select-label"),r=e.getAttribute("data-name")===this.selectedNwo;t?.classList.toggle("selected",r),e.checked=r})}reconcileSelection(){this.renderSelectItems()}openDialog(e){e.preventDefault();let t=this.details;t.open=!0,t.hidden=!1,t.removeAttribute("aria-hidden"),this.baseRepoNwo=this.defaultRepo}selectSourceBranch(){this.sourceBranchHeader&&this.changeSourceBranchButton&&(this.changeSourceBranchButton.hidden=!0,this.sourceBranchHeader.hidden=!1)}async setRepo(e){if(!this.sourceBranchDetails||!this.sourceBranch||!this.sourceBranchSpinner||!this.sourceBranchHeader)return;let t=e.target,r=t?.getAttribute("data-url"),n=t?.getAttribute("data-name");if(!r||!n)return;this.baseRepoNwo=n;let o=this.sourceBranchHeader.hidden,s=this.sourceBranchSpinner.content.cloneNode(!0);this.sourceBranchDetails.replaceWith(s),this.submitButton.disabled=!0;let i=await (0,c.Ts)(document,r);this.sourceBranch.replaceWith(i),this.sourceBranchHeader.hidden=o,this.submitButton.disabled=!1}async closeDialog(){if(this.developmentForm){let e=await (0,c.Ts)(document,this.sidebarUrl);this.sidebarContainer.replaceWith(e)}}flashMessage(e,t="notice"){let r=new s.i4(document.querySelector(".js-flash-template"),{className:`flash-${t}`,message:e}),n=document.importNode(r,!0),o=document.querySelector("#js-flash-container");for(let e of o.children)e.classList.contains("js-flash-template")||o.removeChild(e);o.appendChild(n)}async submit(e){e.preventDefault(),this.submitting=!0;let t=this.form,r=new FormData(t);r.append("repo",r.get("repo")||""),r.append("skip_error_flash","true"),r.delete("source_branch");let n=await fetch(t.action,{method:t.method,body:r,headers:{...(0,u.kt)()}}),o=await n.text();n.ok?(this.error=null,t.hidden=!0,this.dispatchEvent(new CustomEvent("created")),r.has("after_create")?this.result=o:(this.closeDialog(),this.flashMessage(o))):this.error=o,this.submitting=!1;let s=this.desktopLink?.href;s&&window.location.replace(s)}async checkTagMatchResult(e){let t=await e.detail.response.text();this.error=t||null}selectRef(e){let t=e.currentTarget;if(!t)return;let r=document.querySelector(".js-selected-branch"),n=t.querySelector("input"),o=document.querySelector("create-branch ref-selector"),s=document.querySelector("create-branch #source-branch-input");r.textContent=n.value,s.value=n.value,t.closest("details").open=!1,setTimeout(()=>{(0,a.h)(o,"input-entered","")})}constructor(...e){super(...e),(0,n._)(this,"defaultRepo",""),(0,n._)(this,"defaultSourceBranch",""),(0,n._)(this,"selectedNwo",""),(0,n._)(this,"sidebarUrl","")}};(0,o.Cg)([i.aC],l.prototype,"form",void 0),(0,o.Cg)([i.aC],l.prototype,"developmentForm",void 0),(0,o.Cg)([i.aC],l.prototype,"spinner",void 0),(0,o.Cg)([i.aC],l.prototype,"errorContainer",void 0),(0,o.Cg)([i.aC],l.prototype,"details",void 0),(0,o.Cg)([i.aC],l.prototype,"resultContainer",void 0),(0,o.Cg)([i.aC],l.prototype,"baseRepoName",void 0),(0,o.Cg)([i.zV],l.prototype,"repos",void 0),(0,o.Cg)([i.aC],l.prototype,"desktopLink",void 0),(0,o.Cg)([i.aC],l.prototype,"changeSourceBranchButton",void 0),(0,o.Cg)([i.aC],l.prototype,"sourceBranch",void 0),(0,o.Cg)([i.aC],l.prototype,"sourceBranchHeader",void 0),(0,o.Cg)([i.aC],l.prototype,"sourceBranchSpinner",void 0),(0,o.Cg)([i.aC],l.prototype,"sourceBranchDetails",void 0),(0,o.Cg)([i.aC],l.prototype,"submitButton",void 0),(0,o.Cg)([i.aC],l.prototype,"sidebarContainer",void 0),(0,o.Cg)([i.CF],l.prototype,"defaultRepo",void 0),(0,o.Cg)([i.CF],l.prototype,"defaultSourceBranch",void 0),(0,o.Cg)([i.CF],l.prototype,"selectedNwo",void 0),(0,o.Cg)([i.CF],l.prototype,"sidebarUrl",void 0),l=(0,o.Cg)([i.p_],l)},51987:(e,t,r)=>{r.d(t,{jC:()=>a,kt:()=>s,tV:()=>i});var n=r(87057),o=r(13523);function s(e){let t={"X-Requested-With":"XMLHttpRequest",...(0,o.wE)(e)};return{...t,[n.S]:(0,n.O)()}}function i(e,t){for(let[r,n]of Object.entries(s(t)))e.set(r,n)}function a(e){return{"X-GitHub-App-Type":e}}},53331:(e,t,r)=>{r.d(t,{A:()=>i,K:()=>o});var n=r(50467);function o(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}let s=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,n._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};function i(e,t,r=!1){let n=t.headers.get("content-type")||"";if(!r&&!n.startsWith("text/html"))throw new s(`expected response with text/html, but was ${n}`,t);if(r&&!(n.startsWith("text/html")||n.startsWith("application/json")))throw new s(`expected response with text/html or application/json, but was ${n}`,t);let o=t.headers.get("x-html-safe");if(o){if(!e.includes(o))throw new s("response X-HTML-Safe nonce did not match",t)}else throw new s("missing X-HTML-Safe nonce",t)}},69759:(e,t,r)=>{r.d(t,{B:()=>n});function n(e,t){let r=e.createElement("template");return r.innerHTML=t,e.importNode(r.content,!0)}},87057:(e,t,r)=>{r.d(t,{O:()=>i,S:()=>s});var n=r(56038);let o=n.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",s="X-GitHub-Client-Version";function i(){return o}},90891:(e,t,r)=>{r.d(t,{Ee:()=>a,Ts:()=>i,b4:()=>c});var n=r(53331),o=r(69759),s=r(51987);async function i(e,t,r){let i=new Request(t,r);(0,s.tV)(i.headers);let a=await self.fetch(i);if(a.status<200||a.status>=300)throw Error(`HTTP ${a.status}${a.statusText||""}`);return(0,n.A)((0,n.K)(e),a),(0,o.B)(e,await a.text())}function a(e,t,r=1e3,n=[200],o=[202]){return async function r(i){let a=new Request(e,t);(0,s.tV)(a.headers);let c=await self.fetch(a);if(o.includes(c.status))return await new Promise(e=>setTimeout(e,i)),r(1.5*i);if(n.includes(c.status))return c;if(c.status<200||c.status>=300)throw Error(`HTTP ${c.status}${c.statusText||""}`);throw Error(`Unexpected ${c.status} response status from poll endpoint`)}(r)}async function c(e,t,r){let{wait:n=500,acceptedStatusCodes:o=[200],max:i=3,attempt:a=0}=r||{},u=async()=>new Promise((r,c)=>{setTimeout(async()=>{try{let n=new Request(e,t);(0,s.tV)(n.headers);let c=await self.fetch(n);if(o.includes(c.status)||a+1===i)return r(c);r("retry")}catch(e){c(e)}},n*a)}),l=await u();return"retry"!==l?l:c(e,t,{wait:n,acceptedStatusCodes:o,max:i,attempt:a+1})}},97797:(e,t,r)=>{function n(){if(!(this instanceof n))return new n;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}r.d(t,{h:()=>k,on:()=>T});var o,s=window.document.documentElement,i=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector;n.prototype.matchesSelector=function(e,t){return i.call(e,t)},n.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)},n.prototype.indexes=[];var a=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"ID",selector:function(e){var t;if(t=e.match(a))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var c=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(c))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);else if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var u=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;n.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(u))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),n.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},o="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e}();var l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function h(e,t){var r,n,o,s,i,a,c=(e=e.slice(0).concat(e.default)).length,u=t,h=[];do if(l.exec(""),(o=l.exec(u))&&(u=o[3],o[2]||!u)){for(r=0;r<c;r++)if(i=(a=e[r]).selector(o[1])){for(n=h.length,s=!1;n--;)if(h[n].index===a&&h[n].key===i){s=!0;break}s||h.push({index:a,key:i});break}}while(o)return h}function d(e,t){return e.id-t.id}n.prototype.logDefaultIndexUsed=function(){},n.prototype.add=function(e,t){var r,n,s,i,a,c,u,l,d=this.activeIndexes,p=this.selectors,f=this.selectorObjects;if("string"==typeof e){for(n=0,f[(r={id:this.uid++,selector:e,data:t}).id]=r,u=h(this.indexes,e);n<u.length;n++)i=(l=u[n]).key,(a=function(e,t){var r,n,o;for(r=0,n=e.length;r<n;r++)if(o=e[r],t.isPrototypeOf(o))return o}(d,s=l.index))||((a=Object.create(s)).map=new o,d.push(a)),s===this.indexes.default&&this.logDefaultIndexUsed(r),(c=a.map.get(i))||(c=[],a.map.set(i,c)),c.push(r);this.size++,p.push(e)}},n.prototype.remove=function(e,t){if("string"==typeof e){var r,n,o,s,i,a,c,u,l=this.activeIndexes,d=this.selectors=[],p=this.selectorObjects,f={},m=1==arguments.length;for(o=0,r=h(this.indexes,e);o<r.length;o++)for(n=r[o],s=l.length;s--;)if(a=l[s],n.index.isPrototypeOf(a)){if(c=a.map.get(n.key))for(i=c.length;i--;)(u=c[i]).selector===e&&(m||u.data===t)&&(c.splice(i,1),f[u.id]=!0);break}for(o in f)delete p[o],this.size--;for(o in p)d.push(p[o].selector)}},n.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,r,n,o,s,i,a,c,u={},l=[],h=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,n=h.length;t<n;t++)for(r=0,s=h[t],o=(i=this.matches(s)).length;r<o;r++)u[(c=i[r]).id]?a=u[c.id]:(a={id:c.id,selector:c.selector,data:c.data,elements:[]},u[c.id]=a,l.push(a)),a.elements.push(s);return l.sort(d)},n.prototype.matches=function(e){if(!e)return[];var t,r,n,o,s,i,a,c,u,l,h,p=this.activeIndexes,f={},m=[];for(t=0,o=p.length;t<o;t++)if(c=(a=p[t]).element(e)){for(r=0,s=c.length;r<s;r++)if(u=a.map.get(c[r]))for(n=0,i=u.length;n<i;n++)!f[h=(l=u[n]).id]&&this.matchesSelector(e,l.selector)&&(f[h]=!0,m.push(l))}return m.sort(d)};var p={},f={},m=new WeakMap,g=new WeakMap,v=new WeakMap,y=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function b(e,t,r){var n=e[t];return e[t]=function(){return r.apply(e,arguments),n.apply(e,arguments)},e}function w(){m.set(this,!0)}function C(){m.set(this,!0),g.set(this,!0)}function x(){return v.get(this)||null}function S(e,t){y&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||y.get})}function B(e){if(function(e){try{return e.eventPhase,!0}catch(e){return!1}}(e)){var t=(1===e.eventPhase?f:p)[e.type];if(t){var r=function(e,t,r){var n=[],o=t;do{if(1!==o.nodeType)break;var s=e.matches(o);if(s.length){var i={node:o,observers:s};r?n.unshift(i):n.push(i)}}while(o=o.parentElement)return n}(t,e.target,1===e.eventPhase);if(r.length){b(e,"stopPropagation",w),b(e,"stopImmediatePropagation",C),S(e,x);for(var n=0,o=r.length;n<o&&!m.get(e);n++){var s=r[n];v.set(e,s.node);for(var i=0,a=s.observers.length;i<a&&!g.get(e);i++)s.observers[i].data.call(s.node,e)}v.delete(e),S(e)}}}}function T(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=!!o.capture,i=s?f:p,a=i[e];a||(a=new n,i[e]=a,document.addEventListener(e,B,s)),a.add(t,r)}function k(e,t,r){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r}))}}}]);
//# sourceMappingURL=23964-b135da415b29.js.map